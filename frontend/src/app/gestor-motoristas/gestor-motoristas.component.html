<div class="header-container">
  <h2>Lista de Motoristas</h2>
</div>
<div *ngIf="popupMessage" class="popup-message">
  {{ popupMessage }}
</div>
<div class="motoristas-list">
  <div *ngFor="let motorista of motoristas" class="motorista-item">
    <div class="motorista-info">
      <span class="badge">{{motorista.nome}}</span>
      <span class="info">Carta de Condução: {{motorista.nmrCartaConducao}}</span>
      <span class="info">NIF: {{motorista.nif}}</span>
    </div>
    <div class="action-buttons">
      <button (click)="editarMotorista(motorista)" class="edit-btn">Editar</button>
      <button (click)="removerMotorista(motorista._id)" class="delete-btn">Remover</button>
    </div>
  </div>
</div>

<div class="modal" *ngIf="showEditForm">
  <div class="modal-content">
    <h3>Editar Motorista</h3>
    <form (ngSubmit)="salvarEdicao()" #editForm="ngForm">
      <div class="form-group">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" [(ngModel)]="motoristaSelecionado.nome" required>
      </div>
      
      <div class="form-group">
        <label for="anoNascimento">Ano de Nascimento:</label>
        <input type="number" id="anoNascimento" name="anoNascimento" [(ngModel)]="motoristaSelecionado.anoNascimento" required>
      </div>
      
      <div class="form-group">
        <label for="nif">NIF:</label>
        <input type="number" id="nif" name="nif" [(ngModel)]="motoristaSelecionado.nif" required maxlength="9">
      </div>
      
      <div class="form-group">
        <label for="genero">Género:</label>
        <select id="genero" name="genero" [(ngModel)]="motoristaSelecionado.genero" required>
          <option value="masculino">Masculino</option>
          <option value="feminino">Feminino</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="cartaConducao">Carta de Condução:</label>
        <input type="number" id="cartaConducao" name="cartaConducao" [(ngModel)]="motoristaSelecionado.nmrCartaConducao" required>
      </div>

      <div class="morada-section">
        <h4>Morada</h4>
        <div class="form-group">
          <label for="rua">Rua:</label>
          <input type="text" id="rua" name="rua" [(ngModel)]="motoristaSelecionado.morada.rua" required>
        </div>
        
        <div class="form-group">
          <label for="nmrPorta">Número da Porta:</label>
          <input type="number" id="nmrPorta" name="nmrPorta" [(ngModel)]="motoristaSelecionado.morada.nmrPorta" required>
        </div>
        
        <div class="form-group">
          <label for="codigoPostal">Código Postal:</label>
          <input type="text" id="codigoPostal" name="codigoPostal" [(ngModel)]="motoristaSelecionado.morada.codigoPostal" required>
        </div>
        
        <div class="form-group">
          <label for="localidade">Localidade:</label>
          <input type="text" id="localidade" name="localidade" [(ngModel)]="motoristaSelecionado.morada.Localidade" required>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit">Salvar</button>
        <button type="button" (click)="cancelarEdicao()">Cancelar</button>
      </div>
    </form>
  </div>
</div>